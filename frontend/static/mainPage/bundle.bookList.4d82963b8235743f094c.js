(()=>{"use strict";function e(e){const t=document.getElementById("genres").value,o=document.getElementById("bookName").value,n=document.getElementById("author").value;let l={};"clear"===e?(l={lowerGenre:void 0,lowerBookName:void 0,lowerAuthor:void 0},document.getElementById("bookName").value="",document.getElementById("author").value="",document.getElementById("genres").value=""):l={lowerGenre:t||void 0,lowerBookName:o.trim()?o.toLowerCase():void 0,lowerAuthor:n.trim()?n.toLowerCase():void 0};for(const e in l)void 0===l[e]&&delete l[e];console.log(l),fetch("http://localhost:3000/api/book/filter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((e=>{if(e.ok)return e.json();throw new Error("Произошла ошибка при отправке данных на сервер")})).then((e=>{console.log(e.result,"123123");const t=document.getElementById("book-list");t.textContent="",t.className="book-block-main";const o=document.createElement("div");if(o.className="booksPage-bookContainer",!e.result||e.result.length<=0){const e=document.createElement("div");e.textContent="Таких книг не найдено, попробуйте другие фильтры",e.className="noInfo",t.appendChild(e)}else t.appendChild(o);e.result.forEach((e=>{const t=document.createElement("div");t.className="booksPage-bookContainer-bookItem";const n=document.createElement("h2"),l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("a");d.textContent="Подробнее",d.href="http://localhost:8080/book?id="+e.id,n.textContent=e.bookName,l.textContent=e.genre,a.textContent=e.author,t.appendChild(d),t.appendChild(a),t.appendChild(l),t.appendChild(n),o.appendChild(t)}))})).catch((e=>{console.error("Произошла ошибка при отправке данных на сервер:",e)}))}document.getElementById("clearFilters").addEventListener("click",(function(){e("clear")})),document.getElementById("setFilters").addEventListener("click",(function(){e("")})),fetch("http://localhost:3000/api/book/getall").then((e=>e.json())).then((e=>{const t=document.getElementById("book-list");t.textContent="",t.className="booksPage-bookContainer",e.forEach((e=>{const o=document.createElement("div");o.className="booksPage-bookContainer-bookItem";const n=document.createElement("h2"),l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("a");d.textContent="Подробнее",d.href="http://localhost:8080/book?id="+e.id,n.textContent=e.bookName,l.textContent=e.genre,a.textContent=e.author,o.appendChild(d),o.appendChild(a),o.appendChild(l),o.appendChild(n),t.appendChild(o)}))})).catch((e=>{console.error("Произошла ошибка при загрузке данных:",e)}))})();